FROM mcr.microsoft.com/dotnet/sdk:7.0 AS build
WORKDIR /app

COPY . .

#ARG TARGETPLATFORM=linux/arm64

RUN dotnet restore
RUN dir bin/ARM64/Debug/net7.0 -s
#RUN dotnet publish -c Release -o /out -r $TARGETPLATFORM --self-contained true

#FROM mcr.microsoft.com/dotnet/runtime:7.0
#ARG TARGETPLATFORM=linux/arm64

#COPY --from=build /out /app

#RUN dir -s

#ENTRYPOINT ["dotnet", "bin/ARM64/Debug/net7.0/CryptoTradingSystem.General.dll"]

COPY ["bin/ARM64/Debug/net7.0/CryptoTradingSystem.General.dll", "."]

#1 RUN dotnet publish -c Release -o /out -r $TARGETPLATFORM --self-contained true
#RUN dotnet build -c Release -o /out -r $TARGETPLATFORM --no-restore
#3 ENTRYPOINT ["dotnet", "/out/CryptoTradingSystem.General.dll"]
#3 ENTRYPOINT ["dotnet", "run", "-c", "Release"]